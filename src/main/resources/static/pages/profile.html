<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avoided Connections</title>
    <link rel="stylesheet" href="/css/profile.css"/>
    <link rel="stylesheet" href="/css/header&footer.css"/>
    <link rel="icon" href="img/ico.png">
</head>
<body>
<header>
    <p class="site-title">Avoided Connections</p>

    <!-- Справа навигация -->
    <div class="header-right">
        <a href="/profile" class="profile-link">Profile</a>
        <button class="add-story-btn" type="button">+ add Story</button>
    </div>
</header>
<div class="content">
    <div class="profile-container">

        <!-- Аватар -->
        <div class="avatar-wrapper" title="Нажмите, чтобы выбрать аватар">
            <img id="avatar" src="/img/1.png" />
        </div>

        <!-- Имя пользователя -->
        <div class="username" id="username">Иван Иванов</div>

        <!-- Иконка настроек -->
        <svg class="settings-icon" title="Настройки" viewBox="0 0 24 24" onclick="openPasswordModal()">
            <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zm7.43-2.5a7.93 7.93 0 0 0-.16-1.17l2.11-1.65-2-3.46-2.49 1a7.88 7.88 0 0 0-2.03-1.17l-.38-2.65h-4l-.38 2.65a7.88 7.88 0 0 0-2.03 1.17l-2.49-1-2 3.46 2.11 1.65a7.93 7.93 0 0 0-.16 1.17c0 .4.05.8.16 1.17l-2.11 1.65 2 3.46 2.49-1a7.88 7.88 0 0 0 2.03 1.17l.38 2.65h4l.38-2.65a7.88 7.88 0 0 0 2.03-1.17l2.49 1 2-3.46-2.11-1.65c.11-.37.16-.77.16-1.17z"/>
        </svg>

        <!-- Список его историй -->
        <section class="stories-section">
            <h3>Истории пользователя</h3>
            <div class="posts-container" id = "posts-container1">
                <a href="post-page.html" class="post-link">
                    <article class="post-card">
                        <img src="/img/lex.jpg" class="post-image" />
                        <div class="post-content">
                            <h2 class="post-title">Алкоголик</h2>
                            <div class="post-meta">
                                <span>Самара</span>
                                <time datetime="2025-04-15">15 апреля 2025</time>
                            </div>
                            <p class="post-text">
                                Когда-то у него была работа, семья, друзья, но алкоголь постепенно вытеснил все это из его жизни..
                            </p>
                        </div>
                    </article>
                </a>
            </div>
        </section>

        <section class="stories-section">
            <h3>Истории, в которых отметили пользователя</h3>
            <div class="posts-container" id = "posts-container2">
                <a href="post-page.html" class="post-link">
                    <article class="post-card">
                        <img src="/img/lex.jpg" class="post-image" />
                        <div class="post-content">
                            <h2 class="post-title">Алкоголик</h2>
                            <div class="post-meta">
                                <span>Самара</span>
                                <time datetime="2025-04-15">15 апреля 2025</time>
                            </div>
                            <p class="post-text">
                                Когда-то у него была работа, семья, друзья, но алкоголь постепенно вытеснил все это из его жизни..
                            </p>
                        </div>
                    </article>
                </a>
            </div>
        </section>
    </div>
</div>

<!-- Модальное окно выбора аватара -->
<div class="modal" id="avatarModal">
    <div class="modal-content">
        <div class="modal-close" title="Закрыть" onclick="closeAvatarModal()">&times;</div>
        <h2>Выберите аватар</h2>
        <div class="avatar-grid" id="avatarGrid">
            <img src="/img/1.png" data-avatar = "1.png" />
            <img src="/img/2.png" data-avatar = "2.png" />
            <img src="/img/3.png" data-avatar = "3.png" />
            <img src="/img/4.png" data-avatar = "4.png" />
            <img src="/img/5.png" data-avatar = "5.png" />
            <img src="/img/6.png" data-avatar = "6.png" />
            <img src="/img/7.png" data-avatar = "7.png" />
            <img src="/img/8.png" data-avatar = "8.png" />
            <img src="/img/9.png" data-avatar = "9.png" />
        </div>
    </div>
</div>

<!-- Модальное окно смены пароля -->
<div class="modal" id="passwordModal">
    <div class="modal-content">
        <div class="modal-close" onclick="closePasswordModal()" title="Закрыть">&times;</div>
        <h2>Смена пароля</h2>
        <form id="changePasswordForm" onsubmit="return handleChangePassword(event)">
            <label for="currentPassword">Текущий пароль</label>
            <input type="password" id="currentPassword" required autocomplete="current-password" />

            <label for="newPassword">Новый пароль</label>
            <input type="password" id="newPassword" required autocomplete="new-password" />

            <label for="confirmPassword">Подтвердите новый пароль</label>
            <input type="password" id="confirmPassword" required autocomplete="new-password" />

            <button type="submit">Сменить пароль</button>
        </form>
    </div>
</div>

<footer>
    <div>
        <div>
            <p>Бабошин Никита Андреевич</p>
            <p>Мусаилов Даниэль Рубенович</p>
            <p>Группа: 6301-010302D</p>
        </div>
        <div>
            &copy; 2025 Самарский университет
        </div>
</footer>
<script src="/js/updateToken.js"></script>
<script src="/js/profile.js"></script>
</body>
</html>